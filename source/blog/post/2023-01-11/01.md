---
title: Using GitHub as an 11ty blog that auto-deploys to Dreamhost
date: "2023-01-11T18"
tags: [ "11ty", "github", "dreamhost", "development" ]
---

{%- image src="chromebook.jpg", alt="Arial view of a desktop, with an open Chromebook in the middle. A cup of tea is on the left of the Chromebook. On the right is a small blue notebook and a compact two-button mouse. Underneath is a desk mat, a rainbow pastel gradient with stars on it." -%}

For all of October and half of November, I was on the road, [driving the entirety of the historic Lincoln Highway](https://lincolnhighwayjournal.com/)! My plan was to blog as I went, typing up my day when I stopped for the night. I soon learned that was an overly ambitious goal, and every night I was so full from my day that I could do nothing more than watch a movie or do a little journaling in my notebook. In Evanston WY, I was finally able to finish seaming my sweater!

Even though the blogging didn't get done on the trip, I was able to set up my site so that I _could_ blog from the road. I didn't want to bring my MacBook Pro or my Linux laptop with me, and packed my Chromebook instead. I didn't need all of the computing power from my work or personal computers, since I really only wanted to do things like check email, review my map, or make a hotel reservation.

I also fell in love with [11ty](https://www.11ty.dev/), a super customizable static site generator. A WordPress blog would have been the easy option, with its web-based editor, and although I do enjoy working with WordPress very much, I wanted the advantages of a static site. 11ty is so much fun!

For this post, I'm not going too deep into setting up an 11ty blog &#8212; that could be a whole series of posts itself &#8212; but I'll explain a little bit about how my blog is set up before diving into it.

I'm going to cover:

- creating my road trip blog setup with 11ty to build a static site
- using GitHub Actions to build and publish the site
- setting up a deployment script for Dreamhost to grab the built site from GitHub

## My 11ty blog

As I mentioned above, I'm not going too deep into setting up an 11ty blog. [The source code for my road trip blog is available on GitHub](https://github.com/reedcodes/lincolnhighway) if you'd like to view everything. There are still some portions I'd like to refactor; I'd gotten use to doing things in Twig, and there's a bit of an adjustment moving to Nunjucks.

- a little about my organization
- compiles to `/site/` (or docs or dist or whatever)
- have a `.nojekyll` file (because github pages)
- can include `/site/` directory in `.gitignore` since actions will do all that work
- build all files using `package.json` scripts

```js
module.exports = function( eleventyConfig ) {
  return {
    htmlTemplateEngine: "njk",
    markdownTemplateEngine: "njk",
    dir: {
      input: "source",
      data: "_data",
      includes: "_includes",
      output: "site"
    }
  };
};
```

## GitHub Actions to build the site

- create `.github/workflows/` directory and add `build-11ty.yml`
- triggged when pull request on `main` is merged
- setup `node`
- install and build
- push to prod branch with only the `/site/` directory

## Deploying the build site to Dreamhost
- https://github.com/markomarkovic/simple-php-git-deploy
- download `deploy.php` and `deploy-config.example.php` to the project
- rename example file to `deploy-config.php` and configure it as in the README
- for dreamhost: site root is `/home/[USERNAME]/[DOMAIN.COM]/`
- add to `.deploy` directory, or similar
- limitation: only excludes, not explicit includes, e.g. exclude `.nojekyll`
- set up the webhook in GitHub repo settings (push or PR)
